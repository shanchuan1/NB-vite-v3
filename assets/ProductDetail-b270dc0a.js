import{_ as y,G as k,u as T,y as x,a as B,o as D,H as I,I as L,A as H,t as q,e as c,b as _,c as h,f as s,d as t,w as p,q as C,J as f,T as A,F as M,m as N,B as P}from"./index-50a67697.js";import{s as R}from"./SimpleHeader-24c54a75.js";const S={setup(){const n=k(),a=T(),d=x(),o=B({detail:{goodsCarouselList:[]}});D(async()=>{const{id:e}=n.query,{data:i}=await I(e);o.detail=i,d.dispatch("updateCart")}),L(()=>{const e=document.querySelector(".detail-content");e.scrollTop=0});const g=()=>{a.go(-1)},m=()=>{a.push({path:"/cart"})},l=async()=>{const{resultCode:e}=await f({goodsCount:1,goodsId:o.detail.goodsId});e==200&&A.success("添加成功"),d.dispatch("updateCart")},r=async()=>{await f({goodsCount:1,goodsId:o.detail.goodsId}),d.dispatch("updateCart"),a.push({path:"/cart"})},u=H(()=>d.state.cartCount);return{...q(o),goBack:g,goTo:m,handleAddCart:l,goToCart:r,count:u}},components:{sHeader:R}},F={class:"product-detail"},V={class:"detail-content"},E={class:"detail-swipe-wrap"},G=["src"],J={class:"product-info"},j={class:"product-title"},z=t("div",{class:"product-desc"},"免邮费 顺丰快递",-1),K={class:"product-price"},O={class:"product-intro"},Q=t("ul",null,[t("li",null,"概述"),t("li",null,"参数"),t("li",null,"安装服务"),t("li",null,"常见问题")],-1),U=["innerHTML"];function W(n,a,d,o,g,m){const l=c("s-header"),r=c("van-swipe-item"),u=c("van-swipe"),e=c("van-action-bar-icon"),i=c("van-action-bar-button"),b=c("van-action-bar");return _(),h("div",F,[s(l,{name:"商品详情"}),t("div",V,[t("div",E,[s(u,{class:"my-swipe","indicator-color":"#1baeae"},{default:p(()=>[(_(!0),h(M,null,N(n.detail.goodsCarouselList,(v,w)=>(_(),P(r,{key:w},{default:p(()=>[t("img",{src:v,alt:""},null,8,G)]),_:2},1024))),128))]),_:1})]),t("div",J,[t("div",j,C(n.detail.goodsName||""),1),z,t("div",K,[t("span",null,"¥"+C(n.detail.sellingPrice||""),1)])]),t("div",O,[Q,t("div",{class:"product-content",innerHTML:n.detail.goodsDetailContent||""},null,8,U)])]),s(b,null,{default:p(()=>[s(e,{icon:"chat-o",text:"客服"}),s(e,{icon:"cart-o",badge:o.count?o.count:"",onClick:a[0]||(a[0]=v=>o.goTo()),text:"购物车"},null,8,["badge"]),s(i,{type:"warning",color:"#be99ff",onClick:o.handleAddCart,text:"加入购物车"},null,8,["onClick"]),s(i,{type:"danger",color:"#7232dd",onClick:o.goToCart,text:"立即购买"},null,8,["onClick"])]),_:1})])}const Z=y(S,[["render",W]]);export{Z as default};
